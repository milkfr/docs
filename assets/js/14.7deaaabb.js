(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{249:function(s,t,a){"use strict";a.r(t);var n=a(28),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"类的初始化和清理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#类的初始化和清理"}},[s._v("#")]),s._v(" 类的初始化和清理")]),s._v(" "),a("h3",{attrs:{id:"为什么要有初始化和清理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么要有初始化和清理"}},[s._v("#")]),s._v(" 为什么要有初始化和清理")]),s._v(" "),a("p",[s._v("有两个安全性的问题：初始化和清理")]),s._v(" "),a("p",[s._v("C语言中很多bug是因为程序员忘记初始化导致，尤其是很多类库的使用者不知道如何初始化类库组建，但是必须得去初始化")]),s._v(" "),a("p",[s._v("清理是另一个特殊的问题，当使用一个元素完事后就不会去关心这个元素，容易忘记清理它，造成了元素使用的资源滞留不会被回收，直到程序消耗完所有资源（特别是内存）")]),s._v(" "),a("p",[s._v("Java采用类构造器的概念，每创建一个对象，这个方法就会被自动调用，另外还是用了垃圾回收器（Garbage Collector，GC），去回收不在被使用的对象所占的资源")]),s._v(" "),a("h3",{attrs:{id:"构造器的初始化挑战"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构造器的初始化挑战"}},[s._v("#")]),s._v(" 构造器的初始化挑战")]),s._v(" "),a("h4",{attrs:{id:"命名构造器方法的挑战"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命名构造器方法的挑战"}},[s._v("#")]),s._v(" 命名构造器方法的挑战")]),s._v(" "),a("ul",[a("li",[s._v("任何命名都可能与类中其他已有元素的命名冲突")]),s._v(" "),a("li",[s._v("编译器必须始终知道构造器的方法名称")])]),s._v(" "),a("p",[s._v("采用了和C++的解决方法，构造器名称与类名相同")]),s._v(" "),a("h4",{attrs:{id:"构造器方法重载的挑战"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构造器方法重载的挑战"}},[s._v("#")]),s._v(" 构造器方法重载的挑战")]),s._v(" "),a("ul",[a("li",[s._v("如何区分两个相同命名的方法")])]),s._v(" "),a("p",[s._v("目前只能通过一条简单的规则：每个被重载的方法必须有独一无二的参数列表")]),s._v(" "),a("ul",[a("li",[s._v("为什么不通过返回值区分方法")])]),s._v(" "),a("p",[s._v("因为很多情况下，编译器很容易就可以从上下文准确推断出该调用哪个方法，但是存在程序员不在乎返回值，不需要返回值的情况，这样编译器就不能确定想要调用的方法，阅读者也不知道，所以不能根据返回值区分，同理构造函数只能使用void")]),s._v(" "),a("h4",{attrs:{id:"this关键字的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#this关键字的问题"}},[s._v("#")]),s._v(" this关键字的问题")]),s._v(" "),a("p",[s._v("为了区分两个相同类型的对象，比如a和b，调用两个对象的方法的时候，为了区分a和b，编译器实际上做了这样的工作")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("func")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("func")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("当我们需要在类的内部使用时，用的this关键字，因为this关键字的特殊性，影响了一些构造器的问题")]),s._v(" "),a("ul",[a("li",[s._v("如何在构造器中调用构造器")])]),s._v(" "),a("p",[s._v("有时候为了方法复用，需要在构造器中使用到另一个构造器")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Flower")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Flower")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" petals"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("petals"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//- this(s);  // Can't call two!")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("s "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// Another use of "this"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"String & int args"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("如上可以在构造器中通过this调用另一个构造器，而且只能调用一次，成员函数中不可以调用构造器")]),s._v(" "),a("h3",{attrs:{id:"垃圾回收器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#垃圾回收器"}},[s._v("#")]),s._v(" 垃圾回收器")]),s._v(" "),a("p",[s._v("to be continued ...")])])}),[],!1,null,null,null);t.default=e.exports}}]);